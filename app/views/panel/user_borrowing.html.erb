<html>
<head>
<style>
body {
  background-color: #E6E6FA;
}

.red-box {
  background: red;
  background: var(--red-color, red);
  height: 18px;
  width: 70px;
  color: orange; 
  font-weight: bold; 
}
.green-box {
  background: green;
  background: var(--green-color, green);
  height: 18px;
  width: 70px;
  color: yellow; 
  font-weight: bold; 
}

a:link, a:visited
 {
  background-color: #a5f76a;
  color: black;
  text-align: center;
  text-decoration: none;
  display: inline-block;
}

a:hover, a:active 
{
  color: black;
  background-color: #f55546;
  text-align: center;
  text-decoration: none;
  display: inline-block;
}

</style>
</head>
<body>


<% @borrowed_books.each do |copy| %>
  <h3><%= copy.book.title %></h3>
  <ul>
    <% copy.borrowings.each do |borrowing| %>
      <li>
        <strong>Tytuł: <%= borrowing.copy.book.title %></strong>
        <br>
        <strong>ID: <%= borrowing.copy.id %></strong>
        <br>
        Data wypożyczenia: <%= borrowing.borrow_date %>
        <br>
        Data do zwrotu: <%= borrowing.due_date %>
        <br>
        Zwrócona: <%= borrowing.returned ? 'Tak' : 'Nie' %>
        <br>
       <% if !borrowing.returned && !borrowing.renewal_request? %>
          <%= form_with(model: [@book, @copy, borrowing], local: true) do |form| %>
            <%= form.hidden_field :renewal_request, value: 'true' %>
            <%= form.label :due_date, "Nowa data zwrotu" %>
            <%= form.date_field :due_date, required: true, min: borrowing.due_date + 1.day, max: (borrowing.due_date + 14.days), value: borrowing.due_date + 1.day, id: 'due_date' %>
            <div>
              <%= form.submit "Przedłuż wypożyczenie", data: { turbo_stream_frame: 'reload', turbo_confirm: 'Czy na pewno chcesz przedłużyć wypożyczenie?' }%>
            </div><br/> 
          <% end %>
        <% end %>
      </li>
    <% end %>
  </ul>
<% end %>

<p><%= button_to "Lista książek", list_path, :method => :get %></p>
<p><%= button_to "Strona główna", root_path, :method => :get %></p>

</body>
